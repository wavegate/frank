{% extends "base.html" %}

{% block app_content %}
<div class="row">
	<div class="col">
		<div class="card" style="position:relative">
			<div class="card-body">
				<h5 class="card-title">
					{% if action == 'Create' %}
					New Task
					{% elif action == 'Edit' %}
					Edit Task
					{% endif %}
				</h5>
				<div class="card-text">
					<form method="POST">
						{{ form.hidden_tag() }}
						<div class="form-group row">
							{{ form.title.label(class_="col-sm-2 col-form-label")}}
							<div class="col-sm-10">
								{% for error in form.title.errors %}
								<span style="color: red;">[{{ error }}]</span>
								{% endfor %}
								{{ form.title(class_="form-control") }}
							</div>
						</div>
						<div class="form-group row collapse {% if action == 'Edit' %}show{% endif %}" id="collapseTaskForm">
							<div class="col-sm-6">
								<div class="form-group row">
									{{ form.location.label(class_="col-sm-2 col-form-label")}}
									<div class="col-sm-10">						
										{{ form.location(class_="form-control") }}
									</div>
								</div>
								<div class="form-group row">
									{{ form.notes.label(class_="col-sm-2 col-form-label")}}
									<div class="col-sm-10">
										{{ form.notes(id="editor") }}
									</div>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="form-group row">
									{{ form.deadline.label(class_="col-sm-2 col-form-label")}}
									<div class="col-sm-10">
										{{ form.deadline(class_="form-control datepick") }}
									</div>
								</div>
								<div class="form-group row">
									{{ form.start_time.label(class_="col-sm-2 col-form-label")}}
									<div class="col-sm-10">
										{{ form.start_time(class_="form-control datepick") }}
									</div>
								</div>
								<div class="form-group row">
									{{ form.end_time.label(class_="col-sm-2 col-form-label")}}
									<div class="col-sm-10">
										{{ form.end_time(class_="form-control datepick") }}
									</div>
								</div>
							</div>
						</div>
						<div class="form-group row justify-content-center">
							<div class="col-sm-2">
								<input class="btn btn-link btn-block" data-toggle="collapse" data-target="#collapseTaskForm" value="Details"></input>
								<input type="submit" class="btn btn-primary btn-block"></input>
							</div>
						</div>
					</form>
					{% if action=='Edit' %}
					<a class="btn btn-link btn-block" href="{{ url_for('tasks') }}">Cancel</a>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>

<div class="row">
	<div class="col">
		<div id="accordion">
			{% for task in tasks %}
			{% include '_task.html' %}
			{% endfor %}
		</div>
	</div>
</div>
<div class="row" style="padding-top:40px;">
	<div class="col" id="scrollToLocation">
		<div class="collapse" id="stashed_accordion">
			<h4 class="text-center" id="stash">Stash</h4>
			{% for task in stashed_tasks %}
			{% include '_task.html' %}
			{% endfor %}
		</div>
	</div>
</div>
{% endblock %}

{% block bottom_nav %}
<form class="filterform" action="#">
	<input class="filterinput form-control" type="text"/ placeholder="Search tasks...">
</form>
<ul class="navbar-nav ml-md-auto d-md-flex">
	<li class="nav-item">
		<a class="fas fa-chevron-circle-down" style="color:white;" data-toggle="collapse" data-target="#stashed_accordion" aria-controls="stashed_accordion" aria-expanded="false" aria-label="Toggle stashed" id="view_stashed""></a>
	</li>
</ul>
{% endblock %}